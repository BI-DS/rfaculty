---
title: "Reproducing analyses from papers"
author: "Jonas Moss"
format: html
---

* Due to the replication crises social science articles will often be published with data.
* But the code is often lacking.
* If you're really interested in a finding it's a good idea to reproduce the analysis.

Why? Perhaps you want to

1. Verify the authors didn't cheat.
2. Understand what questions they answered better.
3. Find different, and perhaps better, ways to analyze the data.

### Example paper

![]("political_extremism.png")

* Look at the paper and find the *data repository*.
* Download the two Excel files.
* We obviously don't have time to read the paper right now.

###

https://osf.io/n6bf7/?view_only=7aac39a8f8684d9697f8131dad41a2d0
```{r}
understanding <- readxl::read_xlsx("DV_Understanding.xlsx")
```

```{r}
head(understanding)
```
### Averages

```{r}
con_before <- dplyr::filter(understanding, `Con/Val` == "Con", `BEFORE/AFTER` == "Before")
mean(con_before$`Understanding Scores`)
```

```{r}
library("tidyverse")
understanding %>% 
  group_by(`Con/Val`, `BEFORE/AFTER`) %>%
  summarize(avg = mean(`Understanding Scores`),
            std = sd(`Understanding Scores`) / sqrt(n())) ->
  variables
```

```{r}
variables
```

### T-test

```{r}
con <- filter(understanding, `Con/Val` == "Con")
t.test(filter(con, `BEFORE/AFTER` == "Before")$`Understanding Scores`,
       filter(con, `BEFORE/AFTER` == "After")$`Understanding Scores`, 
       paired = TRUE)
```

```{r}
val <- filter(understanding, `Con/Val` == "Val")
t.test(filter(val, `BEFORE/AFTER` == "Before")$`Understanding Scores`,
       filter(val, `BEFORE/AFTER` == "After")$`Understanding Scores`, 
       paired = TRUE)
```

### T-test

```{r}
before <- filter(con, `BEFORE/AFTER` == "Before")$`Understanding Scores`
after <- filter(con, `BEFORE/AFTER` == "After")$`Understanding Scores`

nn <- 600:length(before)
pvalues <- sapply(nn, \(n) t.test(before[1:n],after[1:n],paired = TRUE)$p.value)
plot(nn, pvalues)
abline(h = 0.05)
```

```{r}
before <- filter(val, `BEFORE/AFTER` == "Before")$`Understanding Scores`
after <- filter(val, `BEFORE/AFTER` == "After")$`Understanding Scores`

nn <- 10:length(before)
pvalues <- sapply(nn, \(n) t.test(before[1:n],after[1:n],paired = TRUE)$p.value)
plot(nn, pvalues)
abline(h = 0.05)
```

### ANOVA


```{r}
model <- lm(`Understanding Scores` ~ `BEFORE/AFTER`, data = understanding)
summary(model)
```

